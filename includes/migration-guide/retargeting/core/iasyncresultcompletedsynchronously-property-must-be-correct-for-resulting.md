### IAsyncResult.CompletedSynchronously property must be correct for the resulting task to complete

|   |   |
|---|---|
|Details|When calling TaskFactory.FromAsync, the implementation of the <xref:System.IAsyncResult.CompletedSynchronously> property must be correct for the resulting task to complete. That is, the property must return true if, and only if, the implementation completed synchronously. Previously, the property was not checked.|
|Suggestion|If <xref:System.IAsyncResult?displayProperty=name> implementations correctly return true for the <xref:System.IAsyncResult.CompletedSynchronously?displayProperty=name> property only when a task completed synchronously, then no break will be observed. Users should review <xref:System.IAsyncResult?displayProperty=name> implementations they own (if any) to ensure that they correctly evaluate whether a task completed synchronously or not.|
|Scope|Edge|
|Version|4.5|
|Type|Retargeting|
|Affected APIs|<ul><li><xref:System.Threading.Tasks.TaskFactory.FromAsync(System.IAsyncResult%2CSystem.Action%7BSystem.IAsyncResult%7D)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync(System.IAsyncResult%2CSystem.Action%7BSystem.IAsyncResult%7D%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync(System.IAsyncResult%2CSystem.Action%7BSystem.IAsyncResult%7D%2CSystem.Threading.Tasks.TaskCreationOptions%2CSystem.Threading.Tasks.TaskScheduler)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%601(System.IAsyncResult%2CSystem.Func%7BSystem.IAsyncResult%2C%60%600%7D)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync(System.Func%7BSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Action%7BSystem.IAsyncResult%7D%2CSystem.Object)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync(System.Func%7BSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Action%7BSystem.IAsyncResult%7D%2CSystem.Object%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%601(System.Func%7B%60%600%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Action%7BSystem.IAsyncResult%7D%2C%60%600%2CSystem.Object)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%601(System.Func%7B%60%600%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Action%7BSystem.IAsyncResult%7D%2C%60%600%2CSystem.Object%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%601(System.Func%7BSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Func%7BSystem.IAsyncResult%2C%60%600%7D%2CSystem.Object)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%601(System.Func%7BSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Func%7BSystem.IAsyncResult%2C%60%600%7D%2CSystem.Object%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%601(System.IAsyncResult%2CSystem.Func%7BSystem.IAsyncResult%2C%60%600%7D%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%601(System.IAsyncResult%2CSystem.Func%7BSystem.IAsyncResult%2C%60%600%7D%2CSystem.Threading.Tasks.TaskCreationOptions%2CSystem.Threading.Tasks.TaskScheduler)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%602(System.Func%7B%60%600%2C%60%601%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Action%7BSystem.IAsyncResult%7D%2C%60%600%2C%60%601%2CSystem.Object)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%602(System.Func%7B%60%600%2C%60%601%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Action%7BSystem.IAsyncResult%7D%2C%60%600%2C%60%601%2CSystem.Object%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%602(System.Func%7B%60%600%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Func%7BSystem.IAsyncResult%2C%60%601%7D%2C%60%600%2CSystem.Object)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%602(System.Func%7B%60%600%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Func%7BSystem.IAsyncResult%2C%60%601%7D%2C%60%600%2CSystem.Object%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%603(System.Func%7B%60%600%2C%60%601%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Func%7BSystem.IAsyncResult%2C%60%602%7D%2C%60%600%2C%60%601%2CSystem.Object)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%603(System.Func%7B%60%600%2C%60%601%2C%60%602%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Action%7BSystem.IAsyncResult%7D%2C%60%600%2C%60%601%2C%60%602%2CSystem.Object)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%603(System.Func%7B%60%600%2C%60%601%2C%60%602%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Action%7BSystem.IAsyncResult%7D%2C%60%600%2C%60%601%2C%60%602%2CSystem.Object%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%603(System.Func%7B%60%600%2C%60%601%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Func%7BSystem.IAsyncResult%2C%60%602%7D%2C%60%600%2C%60%601%2CSystem.Object%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%604(System.Func%7B%60%600%2C%60%601%2C%60%602%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Func%7BSystem.IAsyncResult%2C%60%603%7D%2C%60%600%2C%60%601%2C%60%602%2CSystem.Object)?displayProperty=fullName></li><li><xref:System.Threading.Tasks.TaskFactory.FromAsync%60%604(System.Func%7B%60%600%2C%60%601%2C%60%602%2CSystem.AsyncCallback%2CSystem.Object%2CSystem.IAsyncResult%7D%2CSystem.Func%7BSystem.IAsyncResult%2C%60%603%7D%2C%60%600%2C%60%601%2C%60%602%2CSystem.Object%2CSystem.Threading.Tasks.TaskCreationOptions)?displayProperty=fullName></li></ul>|
|Analyzers|<ul><li>CD0058</li></ul>|

