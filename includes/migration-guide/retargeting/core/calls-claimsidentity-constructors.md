### Calls to ClaimsIdentity constructors

|   |   |
|---|---|
|Details|Starting with the .NET Framework 4.6.2, there is a change in how <xref:System.Security.Claims.ClaimsIdentity> constructors with an <xref:System.Security.Principal.IIdentity?displayProperty=name> parameter set the <xref:System.Security.Claims.ClaimsIdentity.Actor?displayProperty=name> property. If the <xref:System.Security.Principal.IIdentity?displayProperty=name> argument is a <xref:System.Security.Claims.ClaimsIdentity> object, and the <xref:System.Security.Claims.ClaimsIdentity.Actor?displayProperty=name> property of that <xref:System.Security.Claims.ClaimsIdentity> object is not <code>null</code>, the <xref:System.Security.Claims.ClaimsIdentity.Actor?displayProperty=name> property is attached by using the <xref:System.Security.Claims.ClaimsIdentity.Clone> method. In the Framework 4.6.1 and earlier versions, the <xref:System.Security.Claims.ClaimsIdentity.Actor?displayProperty=name> property is attached as an existing reference.Because of this change, starting with the .NET Framework 4.6.2, the <xref:System.Security.Claims.ClaimsIdentity.Actor?displayProperty=name> property of the new <xref:System.Security.Claims.ClaimsIdentity> object is not equal to the <xref:System.Security.Claims.ClaimsIdentity.Actor?displayProperty=name> property of the constructor&#39;s <xref:System.Security.Principal.IIdentity?displayProperty=name> argument. In the .NET Framework 4.6.1 and earlier versions, it is equal.|
|Suggestion|If this behavior is undesirable, you can restore the previous behavior by setting the <code>Switch.System.Security.ClaimsIdentity.SetActorAsReferenceWhenCopyingClaimsIdentity</code> switch in your application configuration file to <code>true</code>. This requires that you add the following to the <code>&lt;runtime&gt;</code> section of your web.config file:<pre><code>&lt;configuration&gt;<br />&lt;runtime&gt;<br />&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.ClaimsIdentity.SetActorAsReferenceWhenCopyingClaimsIdentity=true&quot; /&gt;<br />&lt;/runtime&gt;<br />&lt;/configuration&gt;</code></pre>|
|Scope|Edge|
|Version|4.6.2|
|Type|Retargeting|
|Affected APIs|<ul><li><xref:System.Security.Claims.ClaimsIdentity.%23ctor(System.Security.Principal.IIdentity)?displayProperty=fullName></li><li><xref:System.Security.Claims.ClaimsIdentity.%23ctor(System.Security.Principal.IIdentity%2CSystem.Collections.Generic.IEnumerable%7BSystem.Security.Claims.Claim%7D)?displayProperty=fullName></li><li><xref:System.Security.Claims.ClaimsIdentity.%23ctor(System.Security.Principal.IIdentity%2CSystem.Collections.Generic.IEnumerable%7BSystem.Security.Claims.Claim%7D%2CSystem.String%2CSystem.String%2CSystem.String)?displayProperty=fullName></li></ul>|

